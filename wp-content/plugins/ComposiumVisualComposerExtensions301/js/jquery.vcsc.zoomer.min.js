!function(t,e){"use strict";function a(e){e=t.extend({},F,O,e),W=z();for(var a=t(this),r=0,s=a.length;s>r;r++)i(a.eq(r),e);return A=t(".zoomer-element"),_(),a}function i(e,a){if(!e.data("zoomer")){a=t.extend({},a,e.data("zoomer-options")),a.$target=e,a.marginReal=2*a.marginMin,a.originalDOM=a.$target.html(),a.$target.find("img").length>0&&(a.source=[],a.lightbox=[],a.trigger=[],a.rotate=[],a.reset=[],a.$target.find("img").each(function(){a.source.push(t(this).attr("src")),a.lightbox.push(t(this).attr("data-lightbox")),a.trigger.push(t(this).attr("data-trigger")),a.reset.push(t(this).attr("data-reset")),a.rotate.push(t(this).attr("data-rotate"))}),a.$target.empty()),a=I(a);var i='<div class="zoomer '+a.customClass+'">';i+='<div class="zoomer-positioner">',i+='<div class="zoomer-holder">',i+="</div>",i+="</div>",i+="</div>",a.$zoomer=t(i),a.$target.addClass("zoomer-element").html(a.$zoomer),a.controls.zoomIn||a.controls.zoomOut||a.controls.next||a.controls.previous||a.controls.reset||a.controls.rotate||a.controls.lightbox?(a.controls.$zoomIn=t(a.controls.zoomIn),a.controls.$zoomOut=t(a.controls.zoomOut),a.controls.$zoomLevel=t(a.controls.zoomLevel),a.controls.$next=t(a.controls.next),a.controls.$previous=t(a.controls.previous),a.controls.$reset=t(a.controls.reset),a.controls.$rotate=t(a.controls.rotate),a.controls.$lightbox=t(a.controls.lightbox)):(i='<div class="zoomer-controls zoomer-controls-'+a.controls.position+'">',i+='<span class="zoomer-previous" title="'+a.text.prev+'">&lsaquo;</span>',i+='<span class="zoomer-zoom-out" title="'+a.text.zoomOut+'">-</span>',i+='<span class="zoomer-zoom-in" title="'+a.text.zoomIn+'">+</span>',i+='<span class="zoomer-zoom-level" title="'+a.text.zoomLevel+'">%</span>',i+='<span class="zoomer-next" title="'+a.text.next+'">&rsaquo;</span>',i+='<span class="zoomer-reset" title="'+a.text.reset+'">X</span>',i+='<span class="zoomer-rotate" title="'+a.text.rotate+'">&#8631</span>',i+='<span class="zoomer-lightbox" title="'+a.text.lightbox+'">x</span>',i+="</div>",a.$zoomer.append(i),a.controls.$default=a.$zoomer.find(".zoomer-controls"),a.controls.$zoomIn=a.$zoomer.find(".zoomer-zoom-in"),a.controls.$zoomLevel=a.$zoomer.find(".zoomer-zoom-level"),a.controls.$zoomOut=a.$zoomer.find(".zoomer-zoom-out"),a.controls.$next=a.$zoomer.find(".zoomer-next"),a.controls.$previous=a.$zoomer.find(".zoomer-previous"),a.controls.$reset=a.$zoomer.find(".zoomer-reset"),a.controls.$rotate=a.$zoomer.find(".zoomer-rotate"),a.controls.$lightbox=a.$zoomer.find(".zoomer-lightbox")),a.$positioner=a.$zoomer.find(".zoomer-positioner"),a.$holder=a.$zoomer.find(".zoomer-holder"),a.controls.$zoomIn.on("touchstart.zoomer mousedown.zoomer",a,m).on("touchend.zoomer mouseup.zoomer",a,f),a.controls.$zoomOut.on("touchstart.zoomer mousedown.zoomer",a,g).on("touchend.zoomer mouseup.zoomer",a,f),a.controls.$next.on("click.zoomer",a,h),a.controls.$previous.on("click.zoomer",a,p),a.controls.$reset.on("touchstart.zoomer mousedown.zoomer",a,L).on("touchend.zoomer mouseup.zoomer",a,f),a.controls.$rotate.on("click.zoomer",a,D),a.controls.$lightbox.on("click.zoomer",a,P),a.$zoomer.on("mousedown.zoomer",a,j).on("touchstart.zoomer MSPointerDown.zoomer",":not(.zoomer-controls)",a,b),a.reset||a.controls.$reset.hide(),a.rotate||a.controls.$rotate.hide(),a.lightbox||a.controls.$lightbox.hide(),a.$target.data("zoomer",a),R.resize.apply(a.$target),a.images.length>0&&r.apply(a.$target,[a])}}function r(t){t.gallery?t.$zoomer.addClass("zoomer-gallery"):t.$zoomer.removeClass("zoomer-gallery"),"undefined"!=typeof t.$image?t.$holder.animate({opacity:0},300,function(){R.unload.apply(t.$target),s.apply(t.$target,[t,t.images[t.index]])}):s.apply(t.$target,[t,t.images[t.index]])}function s(e,a){if(e.loading=!0,e.tiled){e.tilesTotal=0,e.tilesLoaded=0;var i='<div class="zoomer-tiles">';for(var r in e.images[0])if(e.images[0].hasOwnProperty(r))for(var s in e.images[0][r])e.images[0][r].hasOwnProperty(s)&&(i+='<img class="zoomer-image zoomer-tile" src="'+e.images[0][r][s]+'" data-zoomer-tile="'+r+"-"+s+'" />',e.tilesTotal++);i+="</div>",e.$image=t(i),e.$tiles=e.$image.find("img"),e.$tiles.each(function(a,i){var r=t(i);r.one("load",e,n),r[0].complete&&r.trigger("load")})}else e.$image=t('<img class="zoomer-image" />'),e.$image.one("load.zoomer",e,o).attr("src",a),e.$image[0].complete&&e.$image.trigger("load");if("true"==e.lightbox?e.controls.$lightbox.show():e.controls.$lightbox.hide(),"true"==e.reset?e.controls.$reset.show():e.controls.$reset.hide(),"true"==e.rotate?e.controls.$rotate.show():e.controls.$rotate.hide(),"top"==e.controls.position||"bottom"==e.controls.position){var u=e.controls.$default.outerWidth()/2;e.controls.$default.css("margin-left",-u+"px")}else if("left"==e.controls.position||"right"==e.controls.position){var u=e.controls.$default.outerHeight()/2;e.controls.$default.css("margin-top",-u+"px")}}function n(t){var e=t.data;e.tilesLoaded++,e.tilesLoaded===e.tilesTotal&&(e.tiledRows=e.images[0].length,e.tiledColumns=e.images[0][0].length,e.tiledHeight=e.$tiles.eq(0)[0].naturalHeight*e.tiledRows,e.tiledWidth=e.$tiles.eq(0)[0].naturalWidth*e.tiledColumns,o({data:e}))}function o(e){var a=e.data;if(a.tiled?(a.naturalHeight=a.tiledHeight,a.naturalWidth=a.tiledWidth):(a.naturalHeight=a.$image[0].naturalHeight,a.naturalWidth=a.$image[0].naturalWidth),a.retina&&(a.naturalHeight/=2,a.naturalWidth/=2),a.$holder.css({height:a.naturalHeight,width:a.naturalWidth}),a.targetImageHeight=a.minHeight=a.maxHeight=a.naturalHeight,a.targetImageWidth=a.minWidth=a.maxWidth=a.naturalWidth,a.imageRatioWide=a.naturalWidth/a.naturalHeight,a.imageRatioTall=a.naturalHeight/a.naturalWidth,(a.naturalHeight>a.frameHeight-a.marginReal||a.naturalWidth>a.frameWidth-a.marginReal)&&(a=d(a),a.targetImageHeight=a.minHeight,a.targetImageWidth=a.minWidth),a.positionerLeft=a.targetPositionerLeft=a.centerLeft,a.positionerTop=a.targetPositionerTop=a.centerTop,a.imageLeft=a.targetImageLeft=Math.round(-a.targetImageWidth/2),a.imageTop=a.targetImageTop=Math.round(-a.targetImageHeight/2),a.imageHeight=a.targetImageHeight,a.imageWidth=a.targetImageWidth,W){var i=a.imageWidth/a.naturalWidth,r=a.imageHeight/a.naturalHeight;a.$positioner.css(S("transform","translate3d("+a.positionerLeft+"px, "+a.positionerTop+"px, 0)")),a.$holder.css(S("transform","translate3d(-50%, -50%, 0) scale("+i+","+r+")"));var s=(Math.round(1e4*i)/100).toFixed(0);a.controls.$zoomLevel.empty().html(s+"%")}else a.$positioner.css({left:a.positionerLeft,top:a.positionerTop}),a.$holder.css({left:a.imageLeft,top:a.imageTop,height:a.imageHeight,width:a.imageWidth}),a.controls.$zoomLevel.hide();a.$holder.append(a.$image),a.tiled&&(a.$holder.css({background:"url("+a.tiledThumbnail+") no-repeat left top",backgroundSize:"100% 100%"}),a.tileHeightPercentage=100/a.tiledRows,a.tileWidthPercentage=100/a.tiledColumns,a.$tiles.css({height:a.tileHeightPercentage+"%",width:a.tileWidthPercentage+"%"}),a.$tiles.each(function(e,i){var r=t(i),s=r.data("zoomer-tile").split("-");r.css({left:a.tileWidthPercentage*parseInt(s[1],10)+"%",top:a.tileHeightPercentage*parseInt(s[0],10)+"%"})})),a.$holder.animate({opacity:1},300),a.loading=!1,a.gallery&&u(a)}function u(e){e.index>0&&t('<img src="'+e.images[e.index-1]+'">'),e.index<e.images.length-1&&t('<img src="'+e.images[e.index+1]+'">')}function d(t){return t.naturalHeight>t.naturalWidth?(t.aspect="tall",t.minHeight=Math.round(t.frameHeight-t.marginReal),t.minWidth=Math.round(t.minHeight/t.imageRatioTall),t.minWidth>t.frameWidth-t.marginReal&&(t.minWidth=Math.round(t.frameWidth-t.marginReal),t.minHeight=Math.round(t.minWidth/t.imageRatioWide))):(t.aspect="wide",t.minWidth=Math.round(t.frameWidth-t.marginReal),t.minHeight=Math.round(t.minWidth/t.imageRatioWide),t.minHeight>t.frameHeight-t.marginReal&&(t.minHeight=Math.round(t.frameHeight-t.marginReal),t.minWidth=Math.round(t.minHeight/t.imageRatioTall))),t}function l(){for(var t=0,e=A.length;e>t;t++){var a=A.eq(t).data("zoomer");if("object"==typeof a){if(a=c(a),a.lastAction=a.action,W){var i=a.imageWidth/a.naturalWidth,r=a.imageHeight/a.naturalHeight;a.$positioner.css(S("transform","translate3d("+a.positionerLeft+"px, "+a.positionerTop+"px, 0)")),a.$holder.css(S("transform","translate3d(-50%, -50%, 0) scale("+i+","+r+")"));var s=(Math.round(1e4*i)/100).toFixed(0);a.controls.$zoomLevel.empty().html(s+"%")}else a.$positioner.css({left:a.positionerLeft,top:a.positionerTop}),a.$holder.css({left:a.imageLeft,top:a.imageTop,width:a.imageWidth,height:a.imageHeight}),a.controls.$zoomLevel.hide();a.callback&&a.callback.apply(a.$zoomer,[(a.imageWidth-a.minWidth)/(a.maxWidth-a.minWidth)])}}}function c(t){if("zoom_in"===t.action||"zoom_out"===t.action){t.keyDownTime+=t.increment;var e=("zoom_out"===t.action?-1:1)*Math.round(t.imageWidth*t.keyDownTime-t.imageWidth);"tall"===t.aspect?(t.targetImageHeight+=e,t.targetImageWidth=Math.round(t.targetImageHeight/t.imageRatioTall)):(t.targetImageWidth+=e,t.targetImageHeight=Math.round(t.targetImageWidth/t.imageRatioWide))}return"tall"===t.aspect?t.targetImageHeight<t.minHeight?(t.targetImageHeight=t.minHeight,t.targetImageWidth=Math.round(t.targetImageHeight/t.imageRatioTall)):t.targetImageHeight>t.maxHeight&&(t.targetImageHeight=t.maxHeight,t.targetImageWidth=Math.round(t.targetImageHeight/t.imageRatioTall)):t.targetImageWidth<t.minWidth?(t.targetImageWidth=t.minWidth,t.targetImageHeight=Math.round(t.targetImageWidth/t.imageRatioWide)):t.targetImageWidth>t.maxWidth&&(t.targetImageWidth=t.maxWidth,t.targetImageHeight=Math.round(t.targetImageWidth/t.imageRatioWide)),t.targetImageLeft=Math.round(.5*-t.targetImageWidth),t.targetImageTop=Math.round(.5*-t.targetImageHeight),"drag"===t.action||"pinch"===t.action?(t.imageWidth=t.targetImageWidth,t.imageHeight=t.targetImageHeight,t.imageLeft=t.targetImageLeft,t.imageTop=t.targetImageTop):(t.imageWidth+=Math.round((t.targetImageWidth-t.imageWidth)*t.enertia),t.imageHeight+=Math.round((t.targetImageHeight-t.imageHeight)*t.enertia),t.imageLeft+=Math.round((t.targetImageLeft-t.imageLeft)*t.enertia),t.imageTop+=Math.round((t.targetImageTop-t.imageTop)*t.enertia)),t.boundsLeft=Math.round(t.frameWidth-.5*t.targetImageWidth-t.marginMax),t.boundsRight=Math.round(.5*t.targetImageWidth+t.marginMax),t.boundsTop=Math.round(t.frameHeight-.5*t.targetImageHeight-t.marginMax),t.boundsBottom=Math.round(.5*t.targetImageHeight+t.marginMax),t.targetPositionerLeft<t.boundsLeft&&(t.targetPositionerLeft=t.boundsLeft),t.targetPositionerLeft>t.boundsRight&&(t.targetPositionerLeft=t.boundsRight),t.targetPositionerTop<t.boundsTop&&(t.targetPositionerTop=t.boundsTop),t.targetPositionerTop>t.boundsBottom&&(t.targetPositionerTop=t.boundsBottom),t.zoomPositionTop>0&&t.zoomPositionLeft>0&&(t.targetPositionerLeft=t.centerLeft-t.targetImageLeft-t.targetImageWidth*t.zoomPositionLeft,t.targetPositionerTop=t.centerTop-t.targetImageTop-t.targetImageHeight*t.zoomPositionTop),"pinch"!==t.action&&(t.targetImageWidth<t.frameWidth&&(t.targetPositionerLeft=t.centerLeft),t.targetImageHeight<t.frameHeight&&(t.targetPositionerTop=t.centerTop)),"drag"===t.action||"pinch"===t.action?(t.positionerLeft=t.targetPositionerLeft,t.positionerTop=t.targetPositionerTop):(t.positionerLeft+=Math.round((t.targetPositionerLeft-t.positionerLeft)*t.enertia),t.positionerTop+=Math.round((t.targetPositionerTop-t.positionerTop)*t.enertia)),t.oldImageWidth=t.imageWidth,t.oldImageHeight=t.imageHeight,t}function h(t){var e=t.data;e=H(e),!e.loading&&e.index+1<e.images.length&&(e.index++,r.apply(e.$target,[e]))}function p(t){var e=t.data;e=H(e),!e.loading&&e.index-1>=0&&(e.index--,r.apply(e.$target,[e]))}function m(t){t.preventDefault(),t.stopPropagation();var e=t.data;e=y(e),e.keyDownTime=1,e.action="zoom_in"}function g(t){t.preventDefault(),t.stopPropagation();var e=t.data;e=y(e),e.keyDownTime=1,e.action="zoom_out"}function f(t){t.preventDefault(),t.stopPropagation();var e=t.data;e=v(e),e.keyDownTime=0,e.action=""}function y(t,e,a){return e=e||.5*t.imageWidth,a=a||.5*t.imageHeight,t.zoomPositionLeft=(e-(t.positionerLeft-t.centerLeft))/t.imageWidth,t.zoomPositionTop=(a-(t.positionerTop-t.centerTop))/t.imageHeight,t}function v(t){return t.zoomPositionTop=0,t.zoomPositionLeft=0,t}function j(t){t.preventDefault&&(t.preventDefault(),t.stopPropagation());var e=t.data;e.action="drag",e.mouseX=t.pageX,e.mouseY=t.pageY,e.targetPositionerLeft=e.positionerLeft,e.targetPositionerTop=e.positionerTop,V.on("mousemove.zoomer",e,Q).on("mouseup.zoomer",e,w)}function Q(t){t.preventDefault&&(t.preventDefault(),t.stopPropagation());var e=t.data;t.pageX&&t.pageY&&(e.targetPositionerLeft-=Math.round(e.mouseX-t.pageX),e.targetPositionerTop-=Math.round(e.mouseY-t.pageY),e.mouseX=t.pageX,e.mouseY=t.pageY)}function w(t){t.preventDefault&&(t.preventDefault(),t.stopPropagation());var e=t.data;e.action="",V.off("mousemove.zoomer mouseup.zoomer")}function b(e){if(!(t(e.target).parent(".zoomer-controls").length>0)){e.preventManipulation&&e.preventManipulation(),e.preventDefault(),e.stopPropagation();var a=e.data,i=e.originalEvent;if(i.type.match(/(up|end)$/i))return k(a,i),void 0;if(i.pointerId){var r=!1;for(var s in a.touches)a.touches[s].identifier===i.pointerId&&(r=!0,a.touches[s].pageX=i.clientX,a.touches[s].pageY=i.clientY);r||a.touches.push({identifier:i.pointerId,pageX:i.clientX,pageY:i.clientY})}else a.touches=i.touches;i.type.match(/(down|start)$/i)?C(a):i.type.match(/move$/i)&&x(a)}}function C(t){t.touchEventsBound||(t.touchEventsBound=!0,V.on("touchmove.zoomer MSPointerMove.zoomer",t,b).on("touchend.zoomer MSPointerUp.zoomer",t,b)),t.zoomPercentage=1,t.touches.length>=2&&(t.offset=t.$zoomer.offset(),t.pinchStartX0=t.touches[0].pageX-t.offset.left,t.pinchStartY0=t.touches[0].pageY-t.offset.top,t.pinchStartX1=t.touches[1].pageX-t.offset.left,t.pinchStartY1=t.touches[1].pageY-t.offset.top,t.pinchStartX=(t.pinchStartX0+t.pinchStartX1)/2,t.pinchStartY=(t.pinchStartY0+t.pinchStartY1)/2,t.imageWidthStart=t.imageWidth,t.imageHeightStart=t.imageHeight,y(t),t.pinchDeltaStart=Math.sqrt(Math.pow(t.pinchStartX1-t.pinchStartX0,2)+Math.pow(t.pinchStartY1-t.pinchStartY0,2))),t.mouseX=t.touches[0].pageX,t.mouseY=t.touches[0].pageY}function x(t){1===t.touches.length?(t.action="drag",t.targetPositionerLeft-=t.mouseX-t.touches[0].pageX,t.targetPositionerTop-=t.mouseY-t.touches[0].pageY):t.touches.length>=2&&(t.action="pinch",t.pinchEndX0=t.touches[0].pageX-t.offset.left,t.pinchEndY0=t.touches[0].pageY-t.offset.top,t.pinchEndX1=t.touches[1].pageX-t.offset.left,t.pinchEndY1=t.touches[1].pageY-t.offset.top,(t.pinchEndX0!==t.lastPinchEndX0||t.pinchEndY0!==t.lastPinchEndY0||t.pinchEndX1!==t.lastPinchEndX1||t.pinchEndY1!==t.lastPinchEndY1)&&(t.pinchDeltaEnd=Math.sqrt(Math.pow(t.pinchEndX1-t.pinchEndX0,2)+Math.pow(t.pinchEndY1-t.pinchEndY0,2)),t.zoomPercentage=t.pinchDeltaEnd/t.pinchDeltaStart,t.targetImageWidth=Math.round(t.imageWidthStart*t.zoomPercentage),t.targetImageHeight=Math.round(t.imageHeightStart*t.zoomPercentage),t.pinchEndX=(t.pinchEndX0+t.pinchEndX1)/2,t.pinchEndY=(t.pinchEndY0+t.pinchEndY1)/2,t.lastPinchEndX0=t.pinchEndX0,t.lastPinchEndY0=t.pinchEndY0,t.lastPinchEndX1=t.pinchEndX1,t.lastPinchEndY1=t.pinchEndY1)),t.mouseX=t.touches[0].pageX,t.mouseY=t.touches[0].pageY}function k(t,e){if(t.action="",t.lastPinchEndX0=t.pinchEndX0=t.pinchStartX0=0,t.lastPinchEndY0=t.pinchEndY0=t.pinchStartY0=0,t.lastPinchEndX1=t.pinchEndX1=t.pinchStartX1=0,t.lastPinchEndY1=t.pinchEndY1=t.pinchStartY1=0,t.pinchStartX=t.pinchEndX=0,t.pinchStartY=t.pinchEndX=0,v(t),e.pointerId)for(var a in t.touches)t.touches[a].identifier===e.pointerId&&t.touches.splice(a,1);V.off(".zoomer"),t.touchEventsBound=!1}function I(t){return t.tiled=!1,t.gallery=!1,"string"==typeof t.source?t.images=[t.source]:"string"==typeof t.source[0]?(t.images=t.source,t.images.length>1&&(t.gallery=!0)):(t.tiledThumbnail=t.source.thumbnail,t.images=[t.source.tiles],t.tiled=!0),t}function _(){E||(E=!0,$())}function T(){E=!1}function $(){E&&(e.requestAnimationFrame($),l())}function S(t,e){var a={};return a["-webkit-"+t]=e,a["-moz-"+t]=e,a["-ms-"+t]=e,a["-o-"+t]=e,a[t]=e,a}function z(){var t,a=document.createElement("p"),i={webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"};document.body.insertBefore(a,null);for(var r in i)void 0!==a.style[r]&&(a.style[r]="translate3d(1px,1px,1px)",t=e.getComputedStyle(a).getPropertyValue(i[r]));return document.body.removeChild(a),void 0!==t&&t.length>0&&"none"!==t}function D(t){t.preventDefault(),t.stopPropagation();var e=t.data;e=M(e),e.keyDownTime=1,e.action=""}function M(e){return t({deg:e.rotatePos}).animate({deg:e.rAngle},{step:function(t){e.$zoomer.find(".zoomer-image").css({"-webkit-transform":"rotate("+t+"deg)","-moz-transform":"rotate("+t+"deg)","-ms-transform":"rotate("+t+"deg)",transform:"rotate("+t+"deg)"})}}),e.rotatePos=e.rotatePos+90,e.rAngle=e.rAngle+90,e}function H(t){return t.rotatePos=0,t.rAngle=90,t}function P(e){e.preventDefault(),e.stopPropagation();var a=e.data;"true"==a.lightbox&&t("#"+a.trigger).click()}function L(t){t.preventDefault(),t.stopPropagation();var e=t.data;e=y(e),e.keyDownTime=100,e.action="zoom_out"}var A,V=t(e),E=!1,W=!1,F={callback:t.noop,controls:{position:"bottom",zoomIn:null,zoomOut:null,zoomLevel:null,next:null,previous:null,reset:null,rotate:null,lightbox:null},text:{zoomIn:"Zoom In",zoomOut:"Zoom Out",zoomLevel:"Zoom Level",next:"Next",previous:"Previous",reset:"Reset",rotate:"Rotate",lightbox:"Open in Lightbox"},customClass:"",enertia:.2,increment:.01,marginMin:30,marginMax:100,zoomLevel:!0,reset:!0,rotate:!1,lightbox:!0,retina:!1,source:null},O={images:[],aspect:"",action:"",lastAction:"",keyDownTime:0,marginReal:0,originalDOM:"",gallery:!1,index:0,$tiles:null,tiled:!1,tilesTotal:0,tilesLoaded:0,tiledColumns:0,tiledRows:0,tiledHeight:0,tiledWidth:0,tiledThumbnail:null,centerLeft:0,centerTop:0,frameHeight:0,frameWidth:0,naturalHeight:0,naturalWidth:0,imageRatioWide:0,imageRatioTall:0,minHeight:null,minWidth:null,maxHeight:0,maxWidth:0,boundsTop:0,boundsBottom:0,boundsLeft:0,boundsRight:0,imageWidth:0,imageHeight:0,imageLeft:0,imageTop:0,targetImageWidth:0,targetImageHeight:0,targetImageLeft:0,targetImageTop:0,oldImageWidth:0,oldImageHeight:0,positionerLeft:0,positionerTop:0,targetPositionerLeft:0,targetPositionerTop:0,zoomPositionLeft:0,zoomPositionTop:0,offset:null,touches:[],zoomPercentage:1,rAngle:90,rotatePos:0,pinchStartX0:0,pinchStartX1:0,pinchStartY0:0,pinchStartY1:0,pinchEndX0:0,pinchEndX1:0,pinchEndY0:0,pinchEndY1:0,lastPinchEndX0:0,lastPinchEndY0:0,lastPinchEndX1:0,lastPinchEndY1:0,pinchDeltaStart:0,pinchDeltaEnd:0},R={defaults:function(e){return F=t.extend(F,e||{}),"object"==typeof this?t(this):!0},destroy:function(){var e=t(this).each(function(e,a){var i=t(a).data("zoomer");i&&(V.off(".zoomer"),i.$holder.off(".zoomer"),i.$zoomer.off(".zoomer"),i.controls.$zoomIn.off(".zoomer"),i.controls.$zoomOut.off(".zoomer"),i.controls.$next.off(".zoomer"),i.controls.$previous.off(".zoomer"),i.controls.$reser.off(".zoomer"),i.controls.$rotate.off(".zoomer"),i.controls.$lightbox.off(".zoomer"),i.$target.removeClass("zoomer-element").data("zoomer",null).empty().append(i.originalDOM))});return A=t(".zoomer-element"),A.length<1&&T(),e},load:function(e){return t(this).each(function(a,i){var s=t(i).data("zoomer");s&&(s.source=e,s.index=0,s=I(s),r(s))})},pan:function(e,a){return t(this).each(function(i,r){var s=t(r).data("zoomer");s&&(e/=100,a/=100,s.targetPositionerLeft=Math.round(s.centerLeft-s.targetImageLeft-s.targetImageWidth*e),s.targetPositionerTop=Math.round(s.centerTop-s.targetImageTop-s.targetImageHeight*a))})},resize:function(){return t(this).each(function(e,a){var i=t(a).data("zoomer");if(i)if(i.frameWidth=i.$target.outerWidth(),i.frameHeight=i.$target.outerHeight(),i.centerLeft=Math.round(.5*i.frameWidth),i.centerTop=Math.round(.5*i.frameHeight),i.minHeight=i.naturalHeight,i.minWidth=i.naturalWidth,(i.naturalHeight>i.frameHeight-i.marginReal||i.naturalWidth>i.frameWidth-i.marginReal)&&(i=d(i)),"top"==i.controls.position||"bottom"==i.controls.position){var r=i.controls.$default.outerWidth();if(r>i.frameWidth)var s=r-i.frameWidth;else if(i.frameWidth>r)var s=i.frameWidth-r;var n=i.controls.$default.outerWidth()/2;i.controls.$default.css("margin-left",-n+"px")}else if("left"==i.controls.position||"right"==i.controls.position){var r=i.controls.$default.outerHeight();if(r>i.frameHeight){var s=r-i.frameHeight;"true"==i.rotate&&(s-=i.controls.$rotate.height(),i.controls.$rotate.hide()),"true"==i.reset&&s>0&&(s-=i.controls.$reset.height(),i.controls.$reset.hide()),"true"==i.lightbox&&s>0&&(s-=i.controls.$reset.height(),i.controls.$lightbox.hide()),"true"==i.zoomLevel&&s>0&&(s-=i.controls.$reset.height(),i.controls.$zoomLevel.hide())}else if(i.frameHeight>r){var s=i.frameHeight-r;"true"==i.zoomLevel&&s>0&&(s-=i.controls.$zoomLevel.height(),i.controls.$zoomLevel.show()),"true"==i.lightbox&&s>0&&(s-=i.controls.$lightbox.height(),i.controls.$lightbox.show()),"true"==i.reset&&s>0&&(s-=i.controls.$reset.height(),i.controls.$reset.show()),"true"==i.rotate&&s>0&&(s-=i.controls.$rotate.height(),i.controls.$rotate.show())}var n=i.controls.$default.outerHeight()/2;i.controls.$default.css("margin-top",-n+"px")}})},unload:function(){return t(this).each(function(){var e=t(this).data("zoomer");e&&"undefined"!=typeof e.$image&&e.$image.remove()})}};t.fn.TS_VCSC_ImageZoomer=function(t){return R[t]?R[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?this:a.apply(this,arguments)},t.TS_VCSC_ImageZoomer=function(t){"defaults"===t&&R.defaults.apply(this,Array.prototype.slice.call(arguments,1))}}(jQuery,window);