!function(t){t(document).ready(function(){void 0!==window.VcRowView&&(vc.shortcodes,window.TS_VCSC_VcRowViewCustom=window.VcRowView.extend({buildDesignHelpers:function(){var e=this.model.get("params"),i=this.model.getParam("css"),a=e.ts_row_bg_effects,r=this.$el.find("> .controls .column_toggle"),s=this.$el.find("> .controls .column_edit");if(""!=r.length)var n=r;else var n=s;var o,l,u=i.match(/background\-image:\s*url\(([^\)]+)\)/);u&&!_.isUndefined(u[1])&&(o=u[1]);var u=i.match(/background\-color:\s*([^\s\;]+)\b/);u&&!_.isUndefined(u[1])&&(l=u[1]);var u=i.match(/background:\s*([^\s]+)\b\s*url\(([^\)]+)\)/);if(u&&!_.isUndefined(u[1])&&(l=u[1],o=u[2]),this.$el.find("> .controls .vc_row_color").remove(),this.$el.find("> .controls .vc_row_image").remove(),this.$el.find("> .controls .ts-vcsc-background-color").remove(),this.$el.find("> .controls .ts-vcsc-background-image").remove(),this.$el.find("> .controls .ts-vcsc-background-gradient").remove(),l?t('<span class="vc_row_color" style="background-color: '+l+'" title="'+i18nLocale.row_background_color+'"></span>').insertAfter(n):_.isEmpty(e.bg_color)||t('<span class="vc_row_color" style="background-color: '+e.bg_color+'" title="'+i18nLocale.row_background_color+'"></span>').insertAfter(n),"single"==a&&(_.isEmpty(e.single_color)||t('<span class="ts-vcsc-background-color" style="background-color: '+e.single_color+'" title="'+i18nLocale.row_background_color+'"></span>').insertAfter(n)),"gradient"==a&&!_.isEmpty(e.gradient_color_start)&&!_.isEmpty(e.gradient_color_end)){var d="";d+="background: "+e.gradient_color_start+";",d+="background: -moz-linear-gradient("+e.gradient_angle+"deg, "+e.gradient_color_start+" "+e.gradient_start_offset+"%, "+e.gradient_color_end+" "+e.gradient_end_offset+"%);",d+="background: -webkit-linear-gradient("+e.gradient_angle+"deg, "+e.gradient_color_start+" "+e.gradient_start_offset+"%, "+e.gradient_color_end+" "+e.gradient_end_offset+"%);",d+="background: -o-linear-gradient("+e.gradient_angle+"deg, "+e.gradient_color_start+" "+e.gradient_start_offset+"%, "+e.gradient_color_end+" "+e.gradient_end_offset+"%);",d+="background: -ms-linear-gradient("+e.gradient_angle+"deg, "+e.gradient_color_start+" "+e.gradient_start_offset+"%, "+e.gradient_color_end+" "+e.gradient_end_offset+"%);",d+="background: linear-gradient("+(parseInt(e.gradient_angle)+90)+"deg, "+e.gradient_color_start+" "+e.gradient_start_offset+"%, "+e.gradient_color_end+" "+e.gradient_end_offset+"%);",t('<span class="ts-vcsc-background-gradient" style="'+d+'" title="'+i18nLocale.row_background_color+'"></span>').insertAfter(n)}o?t('<span class="vc_row_image" style="background-image: url('+o+');" title="'+i18nLocale.row_background_image+'"></span>').insertAfter(n):_.isEmpty(e.bg_image)||(o=t('<span class="vc_row_image" style="background-image: url('+t(".vc_loading_block > img").attr("src")+');" title="'+i18nLocale.row_background_image+'"></span>'),o.insertAfter(n),t.ajax({type:"POST",url:window.ajaxurl,data:{action:"wpb_single_image_src",content:e.bg_image,size:"thumbnail"},dataType:"html"}).done(function(t){o.css({backgroundImage:"url("+t+")"})})),("image"==a||"fixed"==a||"parallax"==a||"automove"==a||"movement"==a)&&(_.isEmpty(e.ts_row_bg_image)||(o=t('<span class="ts-vcsc-background-image" style="background-image: url('+t(".vc_loading_block > img").attr("src")+');"'+'title="'+i18nLocale.row_background_image+'"></span>'),o.insertAfter(n),t.ajax({type:"POST",url:window.ajaxurl,data:{action:"wpb_single_image_src",content:e.ts_row_bg_image,size:"thumbnail"},dataType:"html"}).done(function(t){o.css({backgroundImage:"url("+t+")"})})))}}))})}(jQuery);