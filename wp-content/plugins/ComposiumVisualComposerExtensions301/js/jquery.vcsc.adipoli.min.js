!function(e){e.fn.adipoli=function(t){function i(t,i){for(var n=0;n<i.slices;n++){var s=Math.round(t.width()/i.slices);n==i.slices-1?t.children(".adipoli-after").append(e('<div class="adipoli-slice"></div>').css({left:s*n+"px",width:t.width()-s*n+"px",height:"0px",opacity:"0",background:'url("'+t.children("img").attr("src")+'") no-repeat -'+(s+n*s-s)+"px 0%",backgroundSize:t.width()+"px "+t.height()+"px"})):t.children(".adipoli-after").append(e('<div class="adipoli-slice"></div>').css({left:s*n+"px",width:s+"px",height:"0px",opacity:"0",background:'url("'+t.children("img").attr("src")+'") no-repeat -'+(s+n*s-s)+"px 0%",backgroundSize:t.width()+"px "+t.height()+"px"}))}}function n(t,i){for(var n=Math.round(t.width()/i.boxCols),s=Math.round(t.height()/i.boxRows),a=0;a<i.boxRows;a++)for(var r=0;r<i.boxCols;r++)r==i.boxCols-1?t.children(".adipoli-after").append(e('<div class="adipoli-box"></div>').css({opacity:0,left:n*r+"px",top:s*a+"px",width:t.width()-n*r+"px",height:s+"px",background:'url("'+t.children("img").attr("src")+'") no-repeat -'+(n+r*n-n)+"px -"+(s+a*s-s)+"px",backgroundSize:t.width()+"px "+t.height()+"px"})):t.children(".adipoli-after").append(e('<div class="adipoli-box"></div>').css({opacity:0,left:n*r+"px",top:s*a+"px",width:n+"px",height:s+"px",background:'url("'+t.children("img").attr("src")+'") no-repeat -'+(n+r*n-n)+"px -"+(s+a*s-s)+"px",backgroundSize:t.width()+"px "+t.height()+"px"}))}function s(e){for(var t,i,n=e.length;n;t=parseInt(Math.random()*n),i=e[--n],e[n]=e[t],e[t]=i);return e}function a(e){var t=document.createElement("canvas"),i=t.getContext("2d"),n=new Image;n.src=e,t.width=n.width,t.height=n.height,i.drawImage(n,0,0);for(var s=i.getImageData(0,0,t.width,t.height),a=0;a<s.height;a++)for(var r=0;r<s.width;r++){var o=4*a*s.width+4*r,l=(s.data[o]+s.data[o+1]+s.data[o+2])/3;s.data[o]=l,s.data[o+1]=l,s.data[o+2]=l}return i.putImageData(s,0,0,0,0,s.width,s.height),t.toDataURL()}var r=e.extend({startEffect:"transparent",hoverEffect:"normal",triggerEffect:"hover",imageOpacity:.5,animSpeed:300,fillColor:"#000",textColor:"#fff",overlayText:"",slices:10,boxCols:5,boxRows:3,popOutMargin:10,popOutShadow:10},t);return e(this).one("load",function(){e(this).wrap(function(){return'<div class="adipoli-wrapper '+e(this).attr("class")+'" style="width:'+e(this).width()+"px; height:"+e(this).height()+'px;"/>'});var t=e(this).width(),o=e(this).height();if(e(this).parent().append('<div class="adipoli-before '+e(this).attr("class")+'" style="display:none;width:'+e(this).width()+"px; height:"+e(this).height()+'px;"><img src="'+e(this).attr("src")+'" style="width:'+e(this).width()+"px; height:"+e(this).height()+'px;"/></div>'),e(this).parent().append('<div class="adipoli-after '+e(this).attr("class")+'" style="display:none;width:'+e(this).width()+"px; height:"+e(this).height()+'px;"></div>'),"transparent"==r.startEffect)e(this).hide(),e(this).siblings(".adipoli-before").css({"-ms-filter":'"progid:DXImageTransform.Microsoft.Alpha(Opacity='+100*r.imageOpacity+')"',filter:"alpha(opacity="+100*r.imageOpacity+")","-moz-opacity":r.imageOpacity,"-khtml-opacity":r.imageOpacity,opacity:r.imageOpacity}).show();else if("grayscale"==r.startEffect){var l=e(this);l.hide(),l.siblings(".adipoli-before").show(),l.siblings(".adipoli-before").children("img").each(function(){this.src=a(this.src)})}else"normal"==r.startEffect?(e(this).hide(),e(this).siblings(".adipoli-before").show()):"overlay"==r.startEffect&&(l=e(this),l.hide(),e(this).siblings(".adipoli-before").html(r.overlayText).css({"-ms-filter":'"progid:DXImageTransform.Microsoft.Alpha(Opacity='+100*r.imageOpacity+')"',filter:"alpha(opacity="+100*r.imageOpacity+")","-moz-opacity":r.imageOpacity,"-khtml-opacity":r.imageOpacity,opacity:r.imageOpacity,background:r.fillColor,color:r.textColor}).fadeIn(),l.show());e(this).parent().bind("mouseenter",function(){if("normal"==r.hoverEffect){var a=e(this);a.children(".adipoli-after").html('<img src="'+a.children("img").attr("src")+'" style="width:'+t+"px; height:"+o+'px;"/>').fadeIn(r.animSpeed)}else if("popout"==r.hoverEffect){a=e(this);var l=a.children("img").width(),c=a.children("img").height();a.children(".adipoli-after").html('<img src="'+a.children("img").attr("src")+'" style="width:'+t+"px; height:"+o+'px;"/>');var u=a.children(".adipoli-after").children("img");u.width(l+2*r.popOutMargin),u.height(c+2*r.popOutMargin),a.children(".adipoli-after").width(l+2*r.popOutMargin),a.children(".adipoli-after").height(c+2*r.popOutMargin),a.children(".adipoli-after").css({left:"-"+r.popOutMargin+"px",top:"-"+r.popOutMargin+"px","box-shadow":"0px 0px "+r.popOutShadow+"px #000"}).show()}else if("sliceDown"==r.hoverEffect||"sliceDownLeft"==r.hoverEffect||"sliceUp"==r.hoverEffect||"sliceUpLeft"==r.hoverEffect||"sliceUpRandom"==r.hoverEffect||"sliceDownRandom"==r.hoverEffect){e(this).children(".adipoli-after").show(),i(e(this),r);var h=0,d=0,p=e(".adipoli-slice",e(this));("sliceDownLeft"==r.hoverEffect||"sliceUpLeft"==r.hoverEffect)&&(p=e(".adipoli-slice",e(this))._reverse()),("sliceUpRandom"==r.hoverEffect||"sliceDownRandom"==r.hoverEffect)&&(p=s(e(".adipoli-slice",e(this)))),p.each(function(){var t=e(this);"sliceDown"==r.hoverEffect||"sliceDownLeft"==r.hoverEffect?t.css({top:"0px"}):("sliceUp"==r.hoverEffect||"sliceUpLeft"==r.hoverEffect)&&t.css({bottom:"0px"}),d==r.slices-1?setTimeout(function(){t.animate({height:"100%",opacity:"1.0"},r.animSpeed,"",function(){})},100+h):setTimeout(function(){t.animate({height:"100%",opacity:"1.0"},r.animSpeed)},100+h),h+=50,d++})}else if("sliceUpDown"==r.hoverEffect||"sliceUpDownLeft"==r.hoverEffect){e(this).children(".adipoli-after").show(),i(e(this),r),h=0,d=0;var f=0;p=e(".adipoli-slice",e(this)),"sliceUpDownLeft"==r.hoverEffect&&(p=e(".adipoli-slice",e(this))._reverse()),p.each(function(){var t=e(this);0==d?(t.css("top","0px"),d++):(t.css("bottom","0px"),d=0),f==r.slices-1?setTimeout(function(){t.animate({height:"100%",opacity:"1.0"},r.animSpeed,"",function(){})},100+h):setTimeout(function(){t.animate({height:"100%",opacity:"1.0"},r.animSpeed)},100+h),h+=50,f++})}else if("fold"==r.hoverEffect||"foldLeft"==r.hoverEffect)e(this).children(".adipoli-after").show(),a=e(this),i(a,r),h=0,d=0,p=e(".adipoli-slice",a),"foldLeft"==r.hoverEffect&&(p=e(".adipoli-slice",e(this))._reverse()),p.each(function(){var t=e(this),i=t.width();t.css({top:"0px",height:"100%",width:"0px"}),d==r.slices-1?setTimeout(function(){t.animate({width:i,opacity:"1.0"},r.animSpeed,"",function(){})},100+h):setTimeout(function(){t.animate({width:i,opacity:"1.0"},r.animSpeed)},100+h),h+=50,d++});else if("boxRandom"==r.hoverEffect){e(this).children(".adipoli-after").show(),a=e(this),n(a,r);var m=r.boxCols*r.boxRows;d=0,h=0;var g=s(e(".adipoli-box",a));g.each(function(){var t=e(this);d==m-1?setTimeout(function(){t.animate({opacity:"1"},r.animSpeed,"",function(){})},100+h):setTimeout(function(){t.animate({opacity:"1"},r.animSpeed)},100+h),h+=20,d++})}else if("boxRain"==r.hoverEffect||"boxRainReverse"==r.hoverEffect||"boxRainGrow"==r.hoverEffect||"boxRainGrowReverse"==r.hoverEffect){e(this).children(".adipoli-after").show(),a=e(this),n(a,r),m=r.boxCols*r.boxRows,d=0,h=0;var y=0,v=0,b=new Array;b[y]=new Array,g=e(".adipoli-box",a),("boxRainReverse"==r.hoverEffect||"boxRainGrowReverse"==r.hoverEffect)&&(g=e(".adipoli-box",a)._reverse()),g.each(function(){b[y][v]=e(this),v++,v==r.boxCols&&(y++,v=0,b[y]=new Array)});for(var w=0;w<2*r.boxCols;w++){for(var x=w,T=0;T<r.boxRows;T++)x>=0&&x<r.boxCols&&(function(t,i,n,s,a){var o=e(b[t][i]),l=o.width(),c=o.height();("boxRainGrow"==r.hoverEffect||"boxRainGrowReverse"==r.hoverEffect)&&o.width(0).height(0),s==a-1?setTimeout(function(){o.animate({opacity:"1",width:l,height:c},r.animSpeed/1.3,"",function(){})},100+n):setTimeout(function(){o.animate({opacity:"1",width:l,height:c},r.animSpeed/1.3)},100+n)}(T,x,h,d,m),d++),x--;h+=100}}}),e(this).parent().bind("mouseleave",function(){e(this).children(".adipoli-after").html("").hide()})}).each(function(){this.complete&&e(this).load()}),e(this)},e.fn._reverse=[].reverse}(jQuery);